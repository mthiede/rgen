<?xml version="1.0" encoding="CP850"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=CP850" http-equiv="Content-Type" />

  <title>Module: RGen::MetamodelBuilder</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/rgen/metamodel_builder/builder_extensions_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/builder_extensions.rb">lib/rgen/metamodel_builder/builder_extensions.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/builder_runtime_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/builder_runtime.rb">lib/rgen/metamodel_builder/builder_runtime.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/constant_order_helper_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/constant_order_helper.rb">lib/rgen/metamodel_builder/constant_order_helper.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/data_types_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/data_types.rb">lib/rgen/metamodel_builder/data_types.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/intermediate/annotation_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/intermediate/annotation.rb">lib/rgen/metamodel_builder/intermediate/annotation.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/intermediate/feature_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/intermediate/feature.rb">lib/rgen/metamodel_builder/intermediate/feature.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/mm_multiple_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/mm_multiple.rb">lib/rgen/metamodel_builder/mm_multiple.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder/module_extension_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder/module_extension.rb">lib/rgen/metamodel_builder/module_extension.rb</a></li>
          
            <li><a href="../lib/rgen/metamodel_builder_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/metamodel_builder.rb">lib/rgen/metamodel_builder.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">MODULE</span> <a href="MetamodelBuilder/BuilderExtensions.html">RGen::MetamodelBuilder::BuilderExtensions</a></li>
          
          <li><span class="type">MODULE</span> <a href="MetamodelBuilder/BuilderRuntime.html">RGen::MetamodelBuilder::BuilderRuntime</a></li>
          
          <li><span class="type">MODULE</span> <a href="MetamodelBuilder/DataTypes.html">RGen::MetamodelBuilder::DataTypes</a></li>
          
          <li><span class="type">MODULE</span> <a href="MetamodelBuilder/Intermediate.html">RGen::MetamodelBuilder::Intermediate</a></li>
          
          <li><span class="type">MODULE</span> <a href="MetamodelBuilder/ModuleExtension.html">RGen::MetamodelBuilder::ModuleExtension</a></li>
          
          <li><span class="type">CLASS</span> <a href="MetamodelBuilder/MMBase.html">RGen::MetamodelBuilder::MMBase</a></li>
          
          <li><span class="type">CLASS</span> <a href="MetamodelBuilder/MMGeneric.html">RGen::MetamodelBuilder::MMGeneric</a></li>
          
          <li><span class="type">CLASS</span> <a href="MetamodelBuilder/MMProxy.html">RGen::MetamodelBuilder::MMProxy</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-MMMultiple">::MMMultiple</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../CHANGELOG.html">CHANGELOG</a></li>
        
          <li class="file"><a href="../MIT-LICENSE.html">MIT-LICENSE</a></li>
        
          <li class="file"><a href="../README.html">README</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../RGen.html">RGen</a></li>
        
          <li><a href="../RGen/ECore.html">RGen::ECore</a></li>
        
          <li><a href="../RGen/ECore/EAnnotation.html">RGen::ECore::EAnnotation</a></li>
        
          <li><a href="../RGen/ECore/EAttribute.html">RGen::ECore::EAttribute</a></li>
        
          <li><a href="../RGen/ECore/EAttribute/ClassModule.html">RGen::ECore::EAttribute::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/EClass.html">RGen::ECore::EClass</a></li>
        
          <li><a href="../RGen/ECore/EClass/ClassModule.html">RGen::ECore::EClass::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/EClassifier.html">RGen::ECore::EClassifier</a></li>
        
          <li><a href="../RGen/ECore/EClassifier/ClassModule.html">RGen::ECore::EClassifier::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/ECoreBuilderMethods.html">RGen::ECore::ECoreBuilderMethods</a></li>
        
          <li><a href="../RGen/ECore/ECoreInterface.html">RGen::ECore::ECoreInterface</a></li>
        
          <li><a href="../RGen/ECore/ECoreToRuby.html">RGen::ECore::ECoreToRuby</a></li>
        
          <li><a href="../RGen/ECore/ECoreToRuby/FeatureWrapper.html">RGen::ECore::ECoreToRuby::FeatureWrapper</a></li>
        
          <li><a href="../RGen/ECore/EDataType.html">RGen::ECore::EDataType</a></li>
        
          <li><a href="../RGen/ECore/EEnum.html">RGen::ECore::EEnum</a></li>
        
          <li><a href="../RGen/ECore/EEnumLiteral.html">RGen::ECore::EEnumLiteral</a></li>
        
          <li><a href="../RGen/ECore/EFactory.html">RGen::ECore::EFactory</a></li>
        
          <li><a href="../RGen/ECore/EGenericType.html">RGen::ECore::EGenericType</a></li>
        
          <li><a href="../RGen/ECore/EModelElement.html">RGen::ECore::EModelElement</a></li>
        
          <li><a href="../RGen/ECore/EModelElement/ClassModule.html">RGen::ECore::EModelElement::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/ENamedElement.html">RGen::ECore::ENamedElement</a></li>
        
          <li><a href="../RGen/ECore/EObject.html">RGen::ECore::EObject</a></li>
        
          <li><a href="../RGen/ECore/EOperation.html">RGen::ECore::EOperation</a></li>
        
          <li><a href="../RGen/ECore/EPackage.html">RGen::ECore::EPackage</a></li>
        
          <li><a href="../RGen/ECore/EPackage/ClassModule.html">RGen::ECore::EPackage::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/EParameter.html">RGen::ECore::EParameter</a></li>
        
          <li><a href="../RGen/ECore/EReference.html">RGen::ECore::EReference</a></li>
        
          <li><a href="../RGen/ECore/EStringToStringMapEntry.html">RGen::ECore::EStringToStringMapEntry</a></li>
        
          <li><a href="../RGen/ECore/EStructuralFeature.html">RGen::ECore::EStructuralFeature</a></li>
        
          <li><a href="../RGen/ECore/EStructuralFeature/ClassModule.html">RGen::ECore::EStructuralFeature::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/ETypeArgument.html">RGen::ECore::ETypeArgument</a></li>
        
          <li><a href="../RGen/ECore/ETypedElement.html">RGen::ECore::ETypedElement</a></li>
        
          <li><a href="../RGen/ECore/ETypedElement/ClassModule.html">RGen::ECore::ETypedElement::ClassModule</a></li>
        
          <li><a href="../RGen/ECore/RubyToECore.html">RGen::ECore::RubyToECore</a></li>
        
          <li><a href="../RGen/Environment.html">RGen::Environment</a></li>
        
          <li><a href="../RGen/Fragment.html">RGen::Fragment</a></li>
        
          <li><a href="../RGen/Fragment/DumpFileCache.html">RGen::Fragment::DumpFileCache</a></li>
        
          <li><a href="../RGen/Fragment/FragmentedModel.html">RGen::Fragment::FragmentedModel</a></li>
        
          <li><a href="../RGen/Fragment/ModelFragment.html">RGen::Fragment::ModelFragment</a></li>
        
          <li><a href="../RGen/Fragment/ModelFragment/FragmentRef.html">RGen::Fragment::ModelFragment::FragmentRef</a></li>
        
          <li><a href="../RGen/Fragment/ModelFragment/ResolvedReference.html">RGen::Fragment::ModelFragment::ResolvedReference</a></li>
        
          <li><a href="../RGen/Instantiator.html">RGen::Instantiator</a></li>
        
          <li><a href="../RGen/Instantiator/AbstractInstantiator.html">RGen::Instantiator::AbstractInstantiator</a></li>
        
          <li><a href="../RGen/Instantiator/DefaultXMLInstantiator.html">RGen::Instantiator::DefaultXMLInstantiator</a></li>
        
          <li><a href="../RGen/Instantiator/JsonInstantiator.html">RGen::Instantiator::JsonInstantiator</a></li>
        
          <li><a href="../RGen/Instantiator/JsonParser.html">RGen::Instantiator::JsonParser</a></li>
        
          <li><a href="../RGen/Instantiator/NodebasedXMLInstantiator.html">RGen::Instantiator::NodebasedXMLInstantiator</a></li>
        
          <li><a href="../RGen/Instantiator/NodebasedXMLInstantiator/Visitor.html">RGen::Instantiator::NodebasedXMLInstantiator::Visitor</a></li>
        
          <li><a href="../RGen/Instantiator/NodebasedXMLInstantiator/XMLNodeDescriptor.html">RGen::Instantiator::NodebasedXMLInstantiator::XMLNodeDescriptor</a></li>
        
          <li><a href="../RGen/Instantiator/QualifiedNameResolver.html">RGen::Instantiator::QualifiedNameResolver</a></li>
        
          <li><a href="../RGen/Instantiator/ReferenceResolver.html">RGen::Instantiator::ReferenceResolver</a></li>
        
          <li><a href="../RGen/Instantiator/ReferenceResolver/UnresolvedReference.html">RGen::Instantiator::ReferenceResolver::UnresolvedReference</a></li>
        
          <li><a href="../RGen/MetamodelBuilder.html">RGen::MetamodelBuilder</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/BuilderExtensions.html">RGen::MetamodelBuilder::BuilderExtensions</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/BuilderExtensions/FeatureBlockEvaluator.html">RGen::MetamodelBuilder::BuilderExtensions::FeatureBlockEvaluator</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/BuilderRuntime.html">RGen::MetamodelBuilder::BuilderRuntime</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/DataTypes.html">RGen::MetamodelBuilder::DataTypes</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/DataTypes/Enum.html">RGen::MetamodelBuilder::DataTypes::Enum</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/Intermediate.html">RGen::MetamodelBuilder::Intermediate</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/Intermediate/Annotation.html">RGen::MetamodelBuilder::Intermediate::Annotation</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/Intermediate/Attribute.html">RGen::MetamodelBuilder::Intermediate::Attribute</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/Intermediate/Feature.html">RGen::MetamodelBuilder::Intermediate::Feature</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/Intermediate/Reference.html">RGen::MetamodelBuilder::Intermediate::Reference</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/MMBase.html">RGen::MetamodelBuilder::MMBase</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/MMGeneric.html">RGen::MetamodelBuilder::MMGeneric</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/MMProxy.html">RGen::MetamodelBuilder::MMProxy</a></li>
        
          <li><a href="../RGen/MetamodelBuilder/ModuleExtension.html">RGen::MetamodelBuilder::ModuleExtension</a></li>
        
          <li><a href="../RGen/ModelBuilder.html">RGen::ModelBuilder</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext.html">RGen::ModelBuilder::BuilderContext</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/CommandResolver.html">RGen::ModelBuilder::BuilderContext::CommandResolver</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/ConstPathElement.html">RGen::ModelBuilder::BuilderContext::ConstPathElement</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/ExtensionContainerFactory.html">RGen::ModelBuilder::BuilderContext::ExtensionContainerFactory</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/ExtensionContainerFactory/ExtensionContainer.html">RGen::ModelBuilder::BuilderContext::ExtensionContainerFactory::ExtensionContainer</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/PackageNotFoundException.html">RGen::ModelBuilder::BuilderContext::PackageNotFoundException</a></li>
        
          <li><a href="../RGen/ModelBuilder/BuilderContext/PackageResolver.html">RGen::ModelBuilder::BuilderContext::PackageResolver</a></li>
        
          <li><a href="../RGen/ModelBuilder/ModelSerializer.html">RGen::ModelBuilder::ModelSerializer</a></li>
        
          <li><a href="../RGen/ModelBuilder/ReferenceResolver.html">RGen::ModelBuilder::ReferenceResolver</a></li>
        
          <li><a href="../RGen/ModelBuilder/ReferenceResolver/ResolverException.html">RGen::ModelBuilder::ReferenceResolver::ResolverException</a></li>
        
          <li><a href="../RGen/ModelBuilder/ReferenceResolver/ToplevelNamespace.html">RGen::ModelBuilder::ReferenceResolver::ToplevelNamespace</a></li>
        
          <li><a href="../RGen/Serializer.html">RGen::Serializer</a></li>
        
          <li><a href="../RGen/Serializer/JsonSerializer.html">RGen::Serializer::JsonSerializer</a></li>
        
          <li><a href="../RGen/Serializer/QualifiedNameProvider.html">RGen::Serializer::QualifiedNameProvider</a></li>
        
          <li><a href="../RGen/Serializer/XMI11Serializer.html">RGen::Serializer::XMI11Serializer</a></li>
        
          <li><a href="../RGen/Serializer/XMI20Serializer.html">RGen::Serializer::XMI20Serializer</a></li>
        
          <li><a href="../RGen/Serializer/XMLSerializer.html">RGen::Serializer::XMLSerializer</a></li>
        
          <li><a href="../RGen/TemplateLanguage.html">RGen::TemplateLanguage</a></li>
        
          <li><a href="../RGen/TemplateLanguage/DirectoryTemplateContainer.html">RGen::TemplateLanguage::DirectoryTemplateContainer</a></li>
        
          <li><a href="../RGen/TemplateLanguage/OutputHandler.html">RGen::TemplateLanguage::OutputHandler</a></li>
        
          <li><a href="../RGen/TemplateLanguage/TemplateContainer.html">RGen::TemplateLanguage::TemplateContainer</a></li>
        
          <li><a href="../RGen/TemplateLanguage/TemplateHelper.html">RGen::TemplateLanguage::TemplateHelper</a></li>
        
          <li><a href="../RGen/Transformer.html">RGen::Transformer</a></li>
        
          <li><a href="../RGen/Util.html">RGen::Util</a></li>
        
          <li><a href="../RGen/Util/AutoClassCreator.html">RGen::Util::AutoClassCreator</a></li>
        
          <li><a href="../RGen/Util/AutoCreatedClass.html">RGen::Util::AutoCreatedClass</a></li>
        
          <li><a href="../RGen/Util/Base.html">RGen::Util::Base</a></li>
        
          <li><a href="../RGen/Util/CachedGlob.html">RGen::Util::CachedGlob</a></li>
        
          <li><a href="../RGen/Util/FileCacheMap.html">RGen::Util::FileCacheMap</a></li>
        
          <li><a href="../RGen/Util/FileChangeDetector.html">RGen::Util::FileChangeDetector</a></li>
        
          <li><a href="../RGen/Util/MethodDelegation.html">RGen::Util::MethodDelegation</a></li>
        
          <li><a href="../RGen/Util/ModelComparator.html">RGen::Util::ModelComparator</a></li>
        
          <li><a href="../RGen/Util/ModelComparatorBase.html">RGen::Util::ModelComparatorBase</a></li>
        
          <li><a href="../RGen/Util/ModelDumper.html">RGen::Util::ModelDumper</a></li>
        
          <li><a href="../RGen/Util/NameHelper.html">RGen::Util::NameHelper</a></li>
        
          <li><a href="../RGen/Util/ParentAccess.html">RGen::Util::ParentAccess</a></li>
        
          <li><a href="../RGen/Util/PatternMatcher.html">RGen::Util::PatternMatcher</a></li>
        
          <li><a href="../RGen/Util/PatternMatcher/Bindable.html">RGen::Util::PatternMatcher::Bindable</a></li>
        
          <li><a href="../RGen/Util/PatternMatcher/Lazy.html">RGen::Util::PatternMatcher::Lazy</a></li>
        
          <li><a href="../RGen/Util/PatternMatcher/Proxy.html">RGen::Util::PatternMatcher::Proxy</a></li>
        
          <li><a href="../RGen/Util/PatternMatcher/TempEnv.html">RGen::Util::PatternMatcher::TempEnv</a></li>
        
          <li><a href="../AbstractXMLInstantiator.html">AbstractXMLInstantiator</a></li>
        
          <li><a href="../AbstractXMLInstantiator/Visitor.html">AbstractXMLInstantiator::Visitor</a></li>
        
          <li><a href="../MMGen.html">MMGen</a></li>
        
          <li><a href="../MMGen/MetamodelGenerator.html">MMGen::MetamodelGenerator</a></li>
        
          <li><a href="../Array.html">Array</a></li>
        
          <li><a href="../EASupport.html">EASupport</a></li>
        
          <li><a href="../ECoreToUML13.html">ECoreToUML13</a></li>
        
          <li><a href="../ECoreXMLInstantiator.html">ECoreXMLInstantiator</a></li>
        
          <li><a href="../IdStore.html">IdStore</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../UML13ToECore.html">UML13ToECore</a></li>
        
          <li><a href="../XMI11Instantiator.html">XMI11Instantiator</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">RGen::MetamodelBuilder</h1>

    <div id="description" class="description">
      
<p><a href="MetamodelBuilder.html">MetamodelBuilder</a> can be used to create
a metamodel, i.e. Ruby classes which act as metamodel elements.</p>

<p>To create a new metamodel element, create a Ruby class which inherits from
<a href="MetamodelBuilder/MMBase.html">MetamodelBuilder::MMBase</a></p>

<pre>class Person &lt; RGen::MetamodelBuilder::MMBase
end</pre>

<p>This way a couple of class methods are made available to the new class.
These methods can be used to:</p>
<ul><li>
<p>add attributes to the class</p>
</li><li>
<p>add associations with other classes</p>
</li></ul>

<p>Here is an example:</p>

<pre>class Person &lt; RGen::MetamodelBuilder::MMBase
        has_attr 'name', String
        has_attr 'age', Integer
end

class House &lt; RGen::MetamodelBuilder::MMBase
        has_attr 'address' # String is default
end

Person.many_to_many 'homes', House, 'inhabitants'</pre>

<p>See <a href="MetamodelBuilder/BuilderExtensions.html">BuilderExtensions</a>
for details about the available class methods.</p>

<h1>Attributes</h1>

<p>The example above creates two classes 'Person' and 'House'. Person has the
attributes 'name' and 'age', House has the attribute 'address'. The
attributes can be  accessed on instances of the classes in the following
way:</p>

<pre>p = Person.new
p.name = &quot;MyName&quot;
p.age = 22
p.name       # =&gt; &quot;MyName&quot;
p.age        # =&gt; 22</pre>

<p>Note that the class Person takes care of the type of its attributes. As 
declared above, a 'name' can only be a String, an 'age' must be an Integer.
So the following would return an exception:</p>

<pre>p.name = :myName     # =&gt; exception: can not put a Symbol where a String is expected</pre>

<p>If the type of an attribute should be left undefined, use <a
href="../Object.html">Object</a> as type.</p>

<h1>Associations</h1>

<p>As well as attributes show up as instance methods, associations bring their
own accessor methods. For the Person-to-House association this would be:</p>

<pre>h1 = House.new
h1.address = &quot;Street1&quot;
h2 = House.new
h2.address = &quot;Street2&quot;
p.addHomes(h1)
p.addHomes(h2)
p.removeHomes(h1)
p.homes      # =&gt; [ h2 ]</pre>

<p>The Person-to-House association is <em>bidirectional</em>. This means that
with the  addition of a House to a Person, the Person is also added to the
House. Thus:</p>

<pre>h1.inhabitants       # =&gt; []
h2.inhabitants       # =&gt; [ p ]</pre>

<p>Note that the association is defined between two specific classes,
instances of different classes can not be added. Thus, the following would
result in an  exception:</p>

<pre>p.addHomes(:justASymbol) # =&gt; exception: can not put a Symbol where a House is expected</pre>

<h1><a href="ECore.html">ECore</a> Metamodel description</h1>

<p>The class methods described above are used to create a Ruby representation
of the metamodel we have in mind in a very simple and easy way. We don't
have to care about all the details of a metamodel at this point (e.g.
multiplicities, changeability, etc).</p>

<p>At the same time however, an instance of the <a href="ECore.html">ECore</a>
metametamodel (i.e. a <a href="ECore.html">ECore</a> based description of
our metamodel) is provided for all the Ruby classes and modules we create.
Since we did not provide the nitty-gritty details of the metamodel,
defaults are used to fully complete the <a href="ECore.html">ECore</a>
metamodel description.</p>

<p>In order to access the <a href="ECore.html">ECore</a> metamodel
description, just call the <tt>ecore</tt> method on a Ruby class or module
object belonging to your metamodel.</p>

<p>Here is the example continued from above:</p>

<pre>Person.ecore.eAttributes.name # =&gt; [&quot;name&quot;, &quot;age&quot;]
h2pRef = House.ecore.eReferences.first
h2pRef.eType                  # =&gt; Person
h2pRef.eOpposite.eType        # =&gt; House
h2pRef.lowerBound             # =&gt; 0
h2pRef.upperBound             # =&gt; -1
h2pRef.many                   # =&gt; true
h2pRef.containment            # =&gt; false</pre>

<p>Note that the use of array_extensions.rb is assumed here to make model
navigation convenient.</p>

<p>The following metamodel builder methods are supported, see individual
method description for details:</p>

<p>Attributes:</p>
<ul><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-has_attr">BuilderExtensions#has_attr</a></p>
</li></ul>

<p>Unidirectional references:</p>
<ul><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-has_one">BuilderExtensions#has_one</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-has_many">BuilderExtensions#has_many</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-contains_one_uni">BuilderExtensions#contains_one_uni</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-contains_many_uni">BuilderExtensions#contains_many_uni</a></p>
</li></ul>

<p>Bidirectional references:</p>
<ul><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-one_to_one">BuilderExtensions#one_to_one</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-one_to_many">BuilderExtensions#one_to_many</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-many_to_one">BuilderExtensions#many_to_one</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-many_to_many">BuilderExtensions#many_to_many</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-contains_one">BuilderExtensions#contains_one</a></p>
</li><li>
<p><a
href="MetamodelBuilder/BuilderExtensions.html#method-i-contains_many">BuilderExtensions#contains_many</a></p>
</li></ul>

<p>Every builder command can optionally take a specification of further <a
href="ECore.html">ECore</a> properties. Additional properties for
Attributes and References are (with defaults in brackets):</p>
<ul><li>
<p>:ordered (true),</p>
</li><li>
<p>:unique (true),</p>
</li><li>
<p>:changeable (true),</p>
</li><li>
<p>:volatile (false),</p>
</li><li>
<p>:transient (false),</p>
</li><li>
<p>:unsettable (false),</p>
</li><li>
<p>:derived (false),</p>
</li><li>
<p>:lowerBound (0),</p>
</li><li>
<p>:resolveProxies (true) <em>references only</em>,</p>
</li></ul>

<p>Using these additional properties, the above example can be refined as
follows:</p>

<pre>class Person &lt; RGen::MetamodelBuilder::MMBase
        has_attr 'name', String, :lowerBound =&gt; 1
        has_attr 'yearOfBirth', Integer,
        has_attr 'age', Integer, :derived =&gt; true
        def age_derived
                Time.now.year - yearOfBirth
        end
end

Person.many_to_many 'homes', House, 'inhabitants', :upperBound =&gt; 5

Person.ecore.eReferences.find{|r| r.name == 'homes'}.upperBound # =&gt; 5</pre>

<p>This way we state that there must be a name for each person, we introduce a
new attribute 'yearOfBirth' and make 'age' a derived attribute. We also say
that a person can  have at most 5 houses in our metamodel.</p>

<h2>Derived attributes and references</h2>

<p>If the attribute 'derived' of an attribute or reference is set to true, a
method <tt>attributeName_derived</tt> has to be provided. This method is
called whenever the original attribute is accessed. The original attribute
can not be written if it is derived.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="ConstantOrderHelper">ConstantOrderHelper</a></dt>
          
          <dd class="description"><p>The purpose of the <a
href="MetamodelBuilder.html#ConstantOrderHelper">ConstantOrderHelper</a> is
to capture the definition order of <a href="../RGen.html">RGen</a>
metamodel builder  classes, modules and enums. The problem is that Ruby
doesn't seem to track the order of constants being created in a module.
However the order is important because it defines the order of eClassifiers
and eSubpackages in a EPackage.</p>

<p>It would be helpful here if Ruby provided a <tt>const_added</tt> callback,
but this is not the case up to now.</p>

<p>The idea for capturing is that all events of creating a <a
href="../RGen.html">RGen</a> class, module or enum are reported to the <a
href="MetamodelBuilder.html#ConstantOrderHelper">ConstantOrderHelper</a>
singleton. For classes and modules it tries to add their names to the
parent's <tt>_constantOrder</tt> array. The parent module is derived from
the class's or module's name. However, the new name is only added if the
respective parent module has a new constant (which is not yet in
<tt>_constantOrder</tt>) which points to the new class or module. For enums
it is a bit more complicated, because at the time the enum is created, the
parent module does not yet contain the constant to which the enum is
assigned. Therefor, the enum is remembered and it is tried to be stored on
the next event (class, module or enum) within the module which was created
last (which was last extended with <a
href="MetamodelBuilder/ModuleExtension.html">ModuleExtension</a>). If it
can not be found in that module, all parent modules of the last module are
searched. This way it should also be correctly entered in case it was
defined outside of the last created module.  Note that an enum is not
stored to the constant order array unless another event occurs. That's why
it is possible that one enum is missing at the enum. This needs to be taken
care of by the <a href="ECore.html">ECore</a> transformer.</p>

<p>This way of capturing should be sufficient for the regular use cases of the
<a href="../RGen.html">RGen</a> metamodel builder language. However, it is
possible to write code which messes this up, see unit tests for details. In
the worst case, the new classes, modules or enums will just not be found in
a parent module and thus be ignored.</p></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="MMMultiple-method" class="method-detail ">
          <a name="method-c-MMMultiple"></a>

          
          <div class="method-heading">
            <span class="method-name">MMMultiple</span><span
              class="method-args">(*superclasses)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="MMMultiple-source">
<pre>
<span class="ruby-comment"># File lib/rgen/metamodel_builder/mm_multiple.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-constant">MMMultiple</span>(*<span class="ruby-identifier">superclasses</span>)
  <span class="ruby-identifier">c</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">MMBase</span>)
  <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span>
    <span class="ruby-identifier">attr_reader</span> <span class="ruby-value">:multiple_superclasses</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@multiple_superclasses</span>, <span class="ruby-identifier">superclasses</span>)
  <span class="ruby-identifier">superclasses</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">sc</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sc</span>.<span class="ruby-identifier">ancestors</span>}.<span class="ruby-identifier">flatten</span>.
    <span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Class</span>)}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">c</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">include</span> <span class="ruby-identifier">arg</span>
      <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">c</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- MMMultiple-source -->
            
          </div>

          

          
        </div><!-- MMMultiple-method -->

      
      </div><!-- public-class-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

